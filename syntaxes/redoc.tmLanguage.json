{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "redoc",
	"patterns": [
		{ "include": "#comment" },
		{ "include": "#decl_block" },
		{ "include": "#region_block_note" },
		{ "include": "#region_block_example" },
		{ "include": "#region_footnote" },
		{ "include": "#inline_code" },
		{ "include": "#grammar" },
		{ "include": "#codeblock" },
		{ "include": "#codeblock_literal" },
		{ "include": "#syntax" },
		{ "include": "#macro" },
		{ "include": "#directive" },
		{ "include": "#langtag" },
		{ "include": "#blocktag" },
		{ "include": "#inlinetag" },
		{ "include": "#ref" },
		{ "include": "#var" },
		{ "include": "#def" },
		{ "include": "#cite" },
		{ "include": "#quote" },
		{ "include": "#url" },
		{ "include": "#span" },
		{ "include": "#index" }
	],
	"repository": {
		"comment": {
			"begin": "\\[\\/",
			"end": "\\/\\]",
			"name": "comment.block.redoc"
		},
		"inline_code": {
			"begin": "\\[`",
			"end": "\\]",
			"name": "markup.inline.tag.redoc",
			"contentName": "markup.code.inline.redoc",
			"patterns": [
				{"include": "#macro"},
				{"include": "#grammar"},
				{"include": "#var"}
			]
		},
		"grammar": {
			"begin": "\\[~(:opt)?",
			"end": "\\]",
			"name": "markup.inline.tag.redoc",
			"contentName": "markup.grammarterm.redoc",
			"captures": {
				"1": { "name": "support.function.redoc" }
			},
			"patterns": [
			]
		},
		"var": {
			"begin": "\\[$",
			"end": "\\]",
			"name": "markup.inline.tag.redoc",
			"contentName": "markup.texvar.inline.redoc",
			"patterns": [
				{"include": "#macro"},
				{"include": "#inline_code"}
			]
		},
		"macro": {
			"begin": "\\[=",
			"end": "\\]",
			"name": "markup.inline.tag.redoc",
			"contentName": "markup.macro.name.redoc",
			"captures": {
			},
			"patterns": [
				{ "match": "`[\\[\\]]", "name": "markup.escape.redoc" }
			]
		},
		"ref": {
			"match": "\\[#((:note)#)?[a-zA-Z.:$0-9]+\\]",
			"name": "markup.ref.redoc",
			"captures": {
				"2": { "name": "support.function.redoc" }
			}
		},
		"cite": {
			"begin": "\\[cite\\b",
			"end": "\\]",
			"name": "markup.inline.tag.redoc",
			"contentName": "markup.cite.redoc",
			"patterns": [
				{"include": "#macro"}
			]
		},
		"url": {
			"begin": "\\[url\\b",
			"end": "\\]",
			"name": "markup.inline.tag.redoc",
			"contentName": "markup.url.redoc",
			"patterns": [
				{"include": "#macro"}
			]
		},
		"def": {
			"begin": "\\[\\+",
			"end": "\\]",
			"name": "markup.inline.tag.redoc",
			"contentName": "markup.def.redoc",
			"patterns": [
				{"include": "#index"}
			]
		},
		"quote": {
			"begin": "\\[\"",
			"end": "\\]",
			"name": "markup.inline.tag.redoc",
			"contentName": "markup.quote.redoc",
			"patterns": [
				{"include": "#index"},
				{"include": "#macro"}
			]
		},
		"index": {
			"begin": "\\[%(@[a-zA-Z]+)?(:[a-zA-Z]+)?(#[a-zA-Z.]+)?",
			"end": "\\]",
			"name": "markup.index.redoc",
			"beginCaptures": {
				"1": { "name": "support.class.redoc" },
				"2": { "name": "support.function.redoc" },
				"3": { "name": "markup.name.redoc" }
			},
			"patterns": [
				{"include": "#index"},
				{"include": "#langtag"},
				{"include": "#inline_code"},
				{"include": "#grammar"},
				{"include": "#subindex"},
				{"include": "#index_as"}
			],
			"x":1
		},
		"subindex": {
			"begin": "\\[!",
			"end": "\\]",
			"name": "markup.index.sub.redoc",
			"captures": {
			},
			"patterns": [
				{"include": "#index"},
				{"include": "#subindex"}
			]
		},
		"index_as": {
			"begin": "\\[@",
			"end": "\\]"
		},
		"decl_block": {
			"name": "markup.heading",
			"begin": "\\[(section|chapter|document)(:[a-zA-Z]+)?(#[a-zA-Z.]+)?",
			"captures": {
				"2": { "name": "support.function.redoc" },
				"3": { "name": "markup.name.redoc" }
			},
			"end": "\\]",
			"patterns": [
				{ "include": "#langtag" },
				{ "include": "#macro" },
				{ "include": "#index" },
				{ "include": "#decl_attribute" }
			]
		},
		"decl_attribute": {
			"name" :"markup.heading.attribute",
			"begin": "\\[attribute#\\w+",
			"end": "\\]",
			"patterns": [
				{ "include": "#langtag" },
				{ "include": "#decl_value" }
			]
		},
		"decl_value": {
			"name" :"markup.heading.attribute.value",
			"begin": "\\[value",
			"end": "\\]",
			"contentName": "markup.heading.attribute.value",
			"patterns": [
				{ "include": "#langtag" },
				{ "include": "#inlinetag" }
			]
		},
		"directive": {
			"name": "markup.directive",
			"match": "\\[include(:[a-zA-Z]+)?(@[a-z]+)*(\\s*\\b([a-zA-Z._-]+))?\\]",
			"captures": {
				"1": { "name": "support.function.redoc" },
				"2": { "name": "support.class.redoc" },
				"4": { "name": "support.class.redoc" }
			}
		},
		"region_block_note": {
			"name": "markup.region.tag.redoc",
			"contentName": "markup.region.note.redoc",
			"begin": "\\[begin(:note)(@defnote)?\\]",
			"end": "\\[end(\\1)\\]",
			"captures": {
				"1": { "name": "support.function.redoc" },
				"2": { "name": "support.class.redoc" }
			},
			"patterns": [
				{ "include": "$self" }
			]
		},
		"region_block_example": {
			"name": "markup.region.tag.redoc",
			"contentName": "markup.region.example.redoc",
			"begin": "\\[begin(:example)\\]",
			"end": "\\[end(\\1)\\]",
			"captures": {
				"1": { "name": "support.function.redoc" },
				"2": { "name": "support.function.redoc" }
			},
			"patterns": [
				{ "include": "$self" }
			]
		},
		"region_footnote": {
			"name": "markup.region.tag.redoc",
			"contentName": "markup.region.footnote.redoc",
			"begin": "\\[note(:foot)(#[a-zA-Z.:$0-9]+)\\]",
			"end": "\\[note:end\\]",
			"captures": {
				"1": { "name": "support.function.redoc" },
				"2": { "name": "markup.name.redoc" }
			},
			"patterns": [
				{ "include": "$self" }
			]
		},
		"codeblock": {
			"name": "markup.region.codeblock.redoc",
			"contentName": "meta.embedded.block.cpp",
			"begin": "\\[codeblock(?!:literal)(:synopsis)?.*\\]",
			"end": "\\[codeblock:end\\]",
			"captures": {
				"1": { "name": "support.function.redoc" }
			},
			"patterns": [
				{ "include": "source.cpp"}
			]
		},
		"codeblock_literal": {
			"name": "markup.region.codeblock.redoc",
			"contentName": "meta.embedded.pre",
			"begin": "\\[codeblock:literal\\s*\\]",
			"end": "\\[codeblock:end\\]",
			"captures": {
			},
			"patterns": [
				{ "include": "#macro" }
			]
		},
		"syntax": {
			"name": "markup.region.tag.redoc",
			"contentName": "markup.region.syntax.redoc",
			"begin": "\\[syntax(:explanation)?.*\\]",
			"end": "\\[syntax:end\\]",
			"captures": {
			},
			"patterns": [
				{ "include": "#inline_code" },
				{ "include": "#grammarrule" },
				{ "include": "#langtag" },
				{ "include": "#grammar" }
			]
		},
		"grammarrule": {
			"name": "markup.region.syntax.redoc.grammarrul",
			"begin": "\\[rule\\b",
			"end": "\\[rule:end\\]",
			"captures": {
			},
			"patterns": [
				{ "include": "#inline_code" },
				{ "include": "#langtag" },
				{ "include": "#grammar" },
				{
					"begin": "\\[\\|\\s",
					"end": "\\]",
					"name": "markup.region.syntax.redoc.grammarrule.alt",
					"patterns": [
						{ "include": "#inline_code" },
						{ "include": "#langtag" },
						{ "include": "#grammar" },
						{
							"match": "[a-zA-Z-]+",
							"name": "markup.grammarterm.redoc"
						}
					]
				},
				{
					"begin": "\\[\\|(:descriptive)",
					"end": "\\]",
					"name": "markup.region.syntax.redoc.grammarrule.desc",
					"captures": {
						"1": { "name": "support.function.redoc" }
					},
					"patterns": [
						{ "include": "#inline_code" },
						{ "include": "#langtag" },
						{ "include": "#grammar" }
					]
				}
			]
		},
		"inlinetag": {
			"name": "keyword.inlinetag",
			"match": "\\[(br)\\]"
		},
		"langtag": {
			"name": "keyword.langtag",
			"match": "\\[:(|zh_CN|en)(@~)?\\]"
		},
		"blocktag": {
			"name": "keyword.blocktag",
			"match": "\\[(para|list|item)(\\:[~a-zA-Z]+)?(@\\w+)?(#[a-zA-Z.]+)?\\s*\\]",
			"captures": {
				"2": { "name": "support.function.redoc" },
				"3": { "name": "support.class.redoc" },
				"4": { "name": "markup.name.redoc" }
			},
			"patterns": [
			]
		},
		"span": {
			"name": "markup.span",
			"contentName": "meta.span.inner",
			"begin": "\\[span(@\\w+)?(:\\w+)?\\b",
			"end": "\\]",
			"captures": {
				"1": { "name": "support.class.redoc" },
				"2": { "name": "support.function.redoc" }
			},
			"patterns": [
			]
		},
		"keywords": {
			"patterns": [{
				"name": "keyword.control.redoc",
				"match": "\\b(if|while|for|return)\\b"
			}]
		},
		"strings": {
			"name": "string.quoted.double.redoc",
			"begin": "\"",
			"end": "\"",
			"patterns": [
				{
					"name": "constant.character.escape.redoc",
					"match": "\\\\."
				}
			]
		}
	},
	"scopeName": "text.redoc"
}