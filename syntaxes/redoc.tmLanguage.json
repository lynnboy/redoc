{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "redoc",
	"patterns": [
		{ "include": "#comment" },
		{ "include": "#decl_block" },
		{ "include": "#region_block_note" },
		{ "include": "#region_block_example" },
		{ "include": "#region_footnote" },
		{ "include": "#inline_code" },
		{ "include": "#codeblock" },
		{ "include": "#macro" },
		{ "include": "#directive" },
		{ "include": "#langtag" },
		{ "include": "#blocktag" },
		{ "include": "#inlinetag" },
		{ "include": "#ref" },
		{ "include": "#var" },
		{ "include": "#def" },
		{ "include": "#cite" },
		{ "include": "#index" }
	],
	"repository": {
		"comment": {
			"begin": "\\[\\/",
			"end": "\\/\\]",
			"name": "comment.block.redoc"
		},
		"inline_code": {
			"begin": "\\[`",
			"end": "\\]",
			"name": "markup.code.inline.redoc",
			"patterns": [
				{"include": "#macro"},
				{"include": "#var"}
			]
		},
		"var": {
			"begin": "\\[$",
			"end": "\\]",
			"name": "markup.texvar.inline.redoc",
			"patterns": [
				{"include": "#macro"},
				{"include": "#inline_code"}
			]
		},
		"macro": {
			"begin": "\\[=([a-zA-Z_-]+)",
			"end": "\\]",
			"name": "markup.macro.redoc",
			"captures": {
				"1": { "name": "markup.macro.name.redoc" }
			}
		},
		"ref": {
			"match": "\\[#((:note)#)?[a-zA-Z.:$0-9]+\\]",
			"name": "markup.ref.redoc",
			"captures": {
				"2": { "name": "support.function.redoc" }
			}
		},
		"cite": {
			"begin": "\\[cite\\b",
			"end": "\\]",
			"name": "markup.cite.redoc",
			"contentName": "markup.cite.content.redoc",
			"patterns": [
				{"include": "#macro"}
			]
		},
		"def": {
			"begin": "\\[\\+",
			"end": "\\]",
			"name": "markup.def.redoc",
			"patterns": [
				{"include": "#index"}
			]
		},
		"index": {
			"begin": "\\[%(@[a-zA-Z]+)?(:[a-zA-Z]+)?(#[a-zA-Z.]+)?",
			"end": "\\]",
			"name": "markup.index.redoc",
			"beginCaptures": {
				"1": { "name": "support.class.redoc" },
				"2": { "name": "support.function.redoc" },
				"3": { "name": "markup.name.redoc" }
			},
			"patterns": [
				{"include": "#index"},
				{"include": "#langtag"},
				{"include": "#inline_code"},
				{"include": "#subindex"},
				{"include": "#index_as"}
			],
			"x":1
		},
		"subindex": {
			"begin": "\\[!",
			"end": "\\]",
			"name": "markup.index.sub.redoc",
			"captures": {
			}
		},
		"index_as": {
			"begin": "\\[@",
			"end": "\\]"
		},
		"decl_block": {
			"name": "markup.heading",
			"begin": "\\[(section|chapter|document)(:[a-zA-Z]+)?(#[a-zA-Z.]+)?",
			"captures": {
				"2": { "name": "support.function.redoc" },
				"3": { "name": "markup.name.redoc" }
			},
			"end": "\\]",
			"patterns": [
				{ "include": "#langtag" },
				{ "include": "#macro" },
				{ "include": "#index" },
				{ "include": "#decl_attribute" }
			]
		},
		"decl_attribute": {
			"name" :"markup.heading.attribute",
			"begin": "\\[attribute#\\w+",
			"end": "\\]",
			"patterns": [
				{ "include": "#langtag" },
				{ "include": "#decl_value" }
			]
		},
		"decl_value": {
			"name" :"markup.heading.attribute.value",
			"begin": "\\[value",
			"end": "\\]",
			"contentName": "markup.heading.attribute.value",
			"patterns": [
				{ "include": "#langtag" },
				{ "include": "#inlinetag" }
			]
		},
		"directive": {
			"name": "markup.directive",
			"match": "\\[include(:[a-zA-Z]+)?(@[a-z]+)*(\\s*\\b([a-zA-Z._-]+))?\\]",
			"captures": {
				"1": { "name": "support.function.redoc" },
				"2": { "name": "support.class.redoc" },
				"4": { "name": "support.class.redoc" }
			}
		},
		"region_block_note": {
			"name": "markup.region.tag.redoc",
			"contentName": "markup.region.note.redoc",
			"begin": "\\[begin(:note)\\]",
			"end": "\\[end(\\1)\\]",
			"captures": {
				"1": { "name": "support.function.redoc" },
				"2": { "name": "support.function.redoc" }
			},
			"patterns": [
				{ "include": "$self" }
			]
		},
		"region_block_example": {
			"name": "markup.region.tag.redoc",
			"contentName": "markup.region.example.redoc",
			"begin": "\\[begin(:example)\\]",
			"end": "\\[end(\\1)\\]",
			"captures": {
				"1": { "name": "support.function.redoc" },
				"2": { "name": "support.function.redoc" }
			},
			"patterns": [
				{ "include": "$self" }
			]
		},
		"region_footnote": {
			"name": "markup.region.tag.redoc",
			"contentName": "markup.region.footnote.redoc",
			"begin": "\\[note(:foot)(#[a-zA-Z.:$0-9]+)\\]",
			"end": "\\[note:end\\]",
			"captures": {
				"1": { "name": "support.function.redoc" },
				"2": { "name": "markup.name.redoc" }
			},
			"patterns": [
				{ "include": "$self" }
			]
		},
		"codeblock": {
			"name": "markup.region.codeblock.redoc",
			"contentName": "meta.embedded.block.cpp",
			"begin": "\\[codeblock(:\\w+)?.*\\]",
			"end": "\\[codeblock:end\\]",
			"captures": {
			},
			"patterns": [
				{ "include": "source.cpp"}
			]
		},
		"inlinetag": {
			"name": "keyword.inlinetag",
			"match": "\\[(br)\\]"
		},
		"langtag": {
			"name": "keyword.langtag",
			"match": "\\[:(|zh_CN|en)(@~)?\\]"
		},
		"blocktag": {
			"name": "keyword.blocktag",
			"match": "\\[(para|list|item)(@~)?(\\:[a-zA-Z]+)?(#[a-zA-Z.]+)?\\s*\\]"
		},
		"keywords": {
			"patterns": [{
				"name": "keyword.control.redoc",
				"match": "\\b(if|while|for|return)\\b"
			}]
		},
		"strings": {
			"name": "string.quoted.double.redoc",
			"begin": "\"",
			"end": "\"",
			"patterns": [
				{
					"name": "constant.character.escape.redoc",
					"match": "\\\\."
				}
			]
		}
	},
	"scopeName": "text.redoc"
}